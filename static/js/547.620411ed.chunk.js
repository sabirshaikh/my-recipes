"use strict";(self.webpackChunkreact_recipes_2=self.webpackChunkreact_recipes_2||[]).push([[547],{8547:function(e,s,t){t.r(s),t.d(s,{default:function(){return w}});var r=t(2791),a=t(4880),n=t(1523),o=t(9434),i=t(1747),c=t(4270),l=t(4165),d=t(1413),u=t(5861),m=t(1830),h=t.n(m),p=t(5290),f=t(184),x=function(){var e=(0,o.v9)((function(e){return e.authReducer.userToken})),s=(0,o.v9)((function(e){return e.authReducer.userInfo?e.authReducer.userInfo.email:""})),t=(0,o.I0)(),a=(0,r.useRef)(),n=(0,p.cI)({mode:"all",shouldUnregister:!0,reValidateMode:"onChange"}),m=n.register,x=n.handleSubmit,g=n.formState,w=g.errors,j=g.isValid;function y(){return(y=(0,u.Z)((0,l.Z)().mark((function e(s){var r,a,n,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="Something went wrong!",e.prev=1,t(i.qo.showLoader(!0)),a="".concat(s.url,"?key=AIzaSyDRohny3ltD8ORRdQxLQfLCtyHgWRJjk9I"),e.next=6,fetch(a,{method:"POST",body:JSON.stringify(s.payload),headers:{"Content-Type":"application/json"}});case 6:return n=e.sent,e.next=9,n.json();case 9:if(o=e.sent,n.ok){e.next=12;break}throw new Error(o.error.message);case 12:200===n.status&&(h().fire({icon:"success",title:"Success",text:s.successMessage}),o.idToken&&t(i.YV.setToken(o.idToken)),t(i.YV.setEmail(o.email))),t(i.qo.showLoader(!1)),e.next=25;break;case 16:e.prev=16,e.t0=e.catch(1),t(i.qo.showLoader(!1)),console.log("error in catch:",e.t0.message),"TOKEN_EXPIRED"===e.t0.message&&(r="Your session is expired. Please login again!",h().fire({icon:"error",title:"Error",text:r,timer:1500}).then((function(){t(i.YV.logout())}))),"EMAIL_EXISTS"===e.t0.message&&(r=" The email address is already in use by another account."),"INVALID_ID_TOKEN"===e.t0.message&&(r="The ",h().fire({icon:"error",title:"Error",text:r,timer:1500}).then((function(){t(i.YV.logout())}))),console.log("sabir error:",e.t0.message),h().fire({icon:"error",title:"Error",text:r,timer:1500}).then((function(){t(i.YV.logout())}));case 25:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(c.q,{children:(0,f.jsx)("title",{children:"Cook Note - Food Recipes"})}),(0,f.jsx)("div",{className:"site-form log-in-form box-shadow border-radius-10",children:(0,f.jsx)("div",{className:"form-output",children:(0,f.jsxs)("form",{onSubmit:x((function(s){!function(e){y.apply(this,arguments)}({url:"https://identitytoolkit.googleapis.com/v1/accounts:update",payload:{idToken:e,email:s.email},successMessage:"Successfully change your email"})})),children:[(0,f.jsxs)("div",{className:"form-group label-floating",children:[(0,f.jsxs)("p",{children:["Current Email: ",s]}),(0,f.jsx)("label",{className:"control-label",children:"New Email"}),(0,f.jsx)("input",(0,d.Z)({className:"form-control ".concat(w.email&&"inValid"),placeholder:"Enter Email",type:"text",ref:a},m("email",{required:"Email Address is required",pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}))),w.email&&"required"===w.email.type&&(0,f.jsx)("p",{className:"text-main-color",children:"Please enter email"}),w.email&&"pattern"===w.email.type&&(0,f.jsx)("p",{className:"text-main-color",children:"Please enter valid email"})]}),(0,f.jsx)("button",{type:"submit",className:"btn btn-md btn-primary full-width",disabled:!j,children:"Submit"})]})})})]})},g=function(){(0,o.v9)((function(e){return e.authReducer}));var e=(0,o.v9)((function(e){return e.authReducer.userToken})),s=(0,o.I0)(),t=(0,r.useRef)(),a=(0,p.cI)({mode:"all",shouldUnregister:!0,reValidateMode:"onChange"}),n=a.register,m=a.handleSubmit,x=a.formState,g=x.errors,w=x.isValid;function j(){return(j=(0,u.Z)((0,l.Z)().mark((function e(t){var r,a,n,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="Something went wrong!",e.prev=1,s(i.qo.showLoader(!0)),a="".concat(t.url,"?key=AIzaSyDRohny3ltD8ORRdQxLQfLCtyHgWRJjk9I"),e.next=6,fetch(a,{method:"POST",body:JSON.stringify(t.payload),headers:{"Content-Type":"application/json"}});case 6:return n=e.sent,e.next=9,n.json();case 9:if(o=e.sent,n.ok){e.next=13;break}throw console.log("error:",o),new Error(o.error.message);case 13:200===n.status&&(h().fire({icon:"success",title:"Success",text:t.successMessage}),s(i.YV.setToken(o.idToken)),s(i.YV.setEmail(o.email))),s(i.qo.showLoader(!1)),e.next=25;break;case 17:e.prev=17,e.t0=e.catch(1),s(i.qo.showLoader(!1)),console.log("error in catch:",e.t0.message),"TOKEN_EXPIRED"===e.t0.message&&(r="Your session is expired. Please login again!",h().fire({icon:"error",title:"Error",text:r,timer:2e3}).then((function(){s(i.YV.logout())}))),"EMAIL_EXISTS"===e.t0.message&&(r=" The email address is already in use by another account."),"INVALID_ID_TOKEN"===e.t0.message&&(r="The ",h().fire({icon:"error",title:"Error",text:r}).then((function(){s(i.YV.logout())}))),h().fire({icon:"error",title:"Error",text:r}).then((function(){s(i.YV.logout())}));case 25:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return(0,f.jsxs)("div",{className:"site-form log-in-form box-shadow border-radius-10",children:[(0,f.jsx)(c.q,{children:(0,f.jsx)("title",{children:"Password Change | Cook Note"})}),(0,f.jsx)("div",{className:"form-output",children:(0,f.jsxs)("form",{onSubmit:m((function(s){console.log("password data:",s),function(e){j.apply(this,arguments)}({url:"https://identitytoolkit.googleapis.com/v1/accounts:update",payload:{idToken:e,password:s.password},successMessage:"Successfully changed your password"})})),children:[(0,f.jsxs)("div",{className:"form-group label-floating",children:[(0,f.jsx)("label",{className:"control-label",children:"New Password"}),(0,f.jsx)("input",(0,d.Z)({className:"form-control ".concat(g.password&&"passwordIsValid"),placeholder:"Enter Pasword",type:"password",ref:t},n("password",{required:!0,maxLength:10,minLength:6}))),g.password&&"required"===g.password.type&&(0,f.jsx)("p",{className:"text-main-color",children:"Please enter password"}),g.password&&"minLength"===g.password.type&&(0,f.jsx)("p",{className:"text-main-color",children:"Please enter minimum 6 characters"}),g.password&&"maxLength"===g.password.type&&(0,f.jsx)("p",{className:"text-main-color",children:"Please enter maximum 10 characters"})]}),(0,f.jsx)("button",{type:"submit",className:"btn btn-md btn-primary full-width",disabled:!w,children:"Submit"})]})})]})},w=function(){var e=(0,o.v9)((function(e){return e.authReducer})).isAuthenticated,s=(0,a.k6)(),t=(0,o.I0)(),l=(0,a.$B)(),d=l.path,u=l.url;return(0,r.useEffect)((function(){t(i.qo.setTitle("User Profile")),t(i.qo.setHeaderAlignment("text-center"))}),[t]),(0,r.useEffect)((function(){e||s.push("/signin")}),[e]),(0,f.jsxs)("div",{className:"container margin-bottom-100px",children:[(0,f.jsx)(c.q,{children:(0,f.jsx)("title",{children:"Cook Note - Food Recipes"})}),(0,f.jsxs)("ul",{className:"nav nav-pills justify-content-center margin-bottom-20px",children:[(0,f.jsx)("li",{className:"nav-item",children:(0,f.jsx)(n.OL,{className:"nav-link",activeClassName:"active",to:"".concat(u,"/change-email"),children:"Change Email"})}),(0,f.jsx)("li",{className:"nav-item",children:(0,f.jsx)(n.OL,{className:"nav-link",activeClassName:"active",to:"".concat(u,"/change-password"),children:"Change Password"})})]}),(0,f.jsx)(a.AW,{path:"".concat(d,"/change-email"),children:(0,f.jsx)(x,{})}),(0,f.jsx)(a.AW,{path:"".concat(d,"/change-password"),children:(0,f.jsx)(g,{})})]})}}}]);
//# sourceMappingURL=547.620411ed.chunk.js.map